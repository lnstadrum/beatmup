<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Beatmup: Beatmup::ThreadPool Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Beatmup
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classBeatmup_1_1ThreadPool.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classBeatmup_1_1ThreadPool-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Beatmup::ThreadPool Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A pool of threads running tasks <a class="el" href="classBeatmup_1_1ThreadPool.html" title="A pool of threads running tasks ThreadPool runs AbstractTasks, possibly in multiple threads.">ThreadPool</a> runs AbstractTasks, possibly in multiple threads.  
 <a href="classBeatmup_1_1ThreadPool.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool_1_1AnotherThreadFailed.html">AnotherThreadFailed</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool_1_1EventListener.html">EventListener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event listener class.  <a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBeatmup_1_1ThreadPool_1_1JobContext.html">JobContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a1d44394b531b8874cf96e6afd1460b08"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08">TaskExecutionMode</a> { <a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1e23852820b9154316c7c06e2b7ba051">NORMAL</a>
, <a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971">PERSISTENT</a>
 }</td></tr>
<tr class="memdesc:a1d44394b531b8874cf96e6afd1460b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Way how to the task should be run in the pool.  <a href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08">More...</a><br /></td></tr>
<tr class="separator:a1d44394b531b8874cf96e6afd1460b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a031550562217308d1e74803cecf04d88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a031550562217308d1e74803cecf04d88">ThreadPool</a> (const <a class="el" href="namespaceBeatmup.html#a916c7fdbab7370465d62d5cdd0ffceb2">PoolIndex</a> <a class="el" href="wrapper__nnets_8cpp.html#a6d0b01a0115cc0fcc394f07c0d5a43d4">index</a>, const <a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> limitThreadCount, <a class="el" href="classBeatmup_1_1ThreadPool_1_1EventListener.html">EventListener</a> &amp;<a class="el" href="wrapper__core_8cpp.html#acd6ab278aeebd37b39002e29dfa11a3b">listener</a>)</td></tr>
<tr class="separator:a031550562217308d1e74803cecf04d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4eb62d42cdda944d75e291b16a2adf1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ac4eb62d42cdda944d75e291b16a2adf1">~ThreadPool</a> ()</td></tr>
<tr class="separator:ac4eb62d42cdda944d75e291b16a2adf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4131521b4d10c5a6c44c7ff0325d26e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ad4131521b4d10c5a6c44c7ff0325d26e">check</a> ()</td></tr>
<tr class="memdesc:ad4131521b4d10c5a6c44c7ff0325d26e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the thread pool is doing great.  <a href="classBeatmup_1_1ThreadPool.html#ad4131521b4d10c5a6c44c7ff0325d26e">More...</a><br /></td></tr>
<tr class="separator:ad4131521b4d10c5a6c44c7ff0325d26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0520ed6916222f94baef73e21df4c625"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a0520ed6916222f94baef73e21df4c625">resize</a> (<a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> newThreadCount)</td></tr>
<tr class="memdesc:a0520ed6916222f94baef73e21df4c625"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resizes the pool.  <a href="classBeatmup_1_1ThreadPool.html#a0520ed6916222f94baef73e21df4c625">More...</a><br /></td></tr>
<tr class="separator:a0520ed6916222f94baef73e21df4c625"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b8c13fab602668a6428eb790ab73b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a00b8c13fab602668a6428eb790ab73b7">submitTask</a> (<a class="el" href="classBeatmup_1_1AbstractTask.html">AbstractTask</a> &amp;<a class="el" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>, const <a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08">TaskExecutionMode</a> <a class="el" href="wrapper__imag_8cpp.html#a31fdae971e9dea189b6b79d3a91339cc">mode</a>)</td></tr>
<tr class="memdesc:a00b8c13fab602668a6428eb790ab73b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a new task to the jobs queue.  <a href="classBeatmup_1_1ThreadPool.html#a00b8c13fab602668a6428eb790ab73b7">More...</a><br /></td></tr>
<tr class="separator:a00b8c13fab602668a6428eb790ab73b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a913cab5f5d03eb40ca7c690c1546e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a4a913cab5f5d03eb40ca7c690c1546e6">repeatTask</a> (<a class="el" href="classBeatmup_1_1AbstractTask.html">AbstractTask</a> &amp;<a class="el" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>, bool abortCurrent)</td></tr>
<tr class="memdesc:a4a913cab5f5d03eb40ca7c690c1546e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensures a given task executed at least once.  <a href="classBeatmup_1_1ThreadPool.html#a4a913cab5f5d03eb40ca7c690c1546e6">More...</a><br /></td></tr>
<tr class="separator:a4a913cab5f5d03eb40ca7c690c1546e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a5f536aa519d7820c7b20abc2269404"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a2a5f536aa519d7820c7b20abc2269404">waitForJob</a> (<a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> <a class="el" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>)</td></tr>
<tr class="memdesc:a2a5f536aa519d7820c7b20abc2269404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until a given job finishes if not yet.  <a href="classBeatmup_1_1ThreadPool.html#a2a5f536aa519d7820c7b20abc2269404">More...</a><br /></td></tr>
<tr class="separator:a2a5f536aa519d7820c7b20abc2269404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59853d25b143fc2558cf52ac4a8fc0e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a59853d25b143fc2558cf52ac4a8fc0e9">abortJob</a> (<a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> <a class="el" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>)</td></tr>
<tr class="memdesc:a59853d25b143fc2558cf52ac4a8fc0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aborts a given submitted job.  <a href="classBeatmup_1_1ThreadPool.html#a59853d25b143fc2558cf52ac4a8fc0e9">More...</a><br /></td></tr>
<tr class="separator:a59853d25b143fc2558cf52ac4a8fc0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff627ac693a457fe1bd7bced0d982667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#aff627ac693a457fe1bd7bced0d982667">wait</a> ()</td></tr>
<tr class="memdesc:aff627ac693a457fe1bd7bced0d982667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocks until all the submitted jobs are executed.  <a href="classBeatmup_1_1ThreadPool.html#aff627ac693a457fe1bd7bced0d982667">More...</a><br /></td></tr>
<tr class="separator:aff627ac693a457fe1bd7bced0d982667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759a572eb4b80972efcbdac1b0f87d7b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a759a572eb4b80972efcbdac1b0f87d7b">busy</a> ()</td></tr>
<tr class="memdesc:a759a572eb4b80972efcbdac1b0f87d7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether the pool has jobs.  <a href="classBeatmup_1_1ThreadPool.html#a759a572eb4b80972efcbdac1b0f87d7b">More...</a><br /></td></tr>
<tr class="separator:a759a572eb4b80972efcbdac1b0f87d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75a5d24d1ef1fee816ef5f9eeb6d2a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ad75a5d24d1ef1fee816ef5f9eeb6d2a2">isGpuQueried</a> () const</td></tr>
<tr class="separator:ad75a5d24d1ef1fee816ef5f9eeb6d2a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a961e79a87ec4c9bea40fde3e733d4a10"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a961e79a87ec4c9bea40fde3e733d4a10">isGpuReady</a> () const</td></tr>
<tr class="separator:a961e79a87ec4c9bea40fde3e733d4a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be275ae8cee993f727e2e1507081d11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a9be275ae8cee993f727e2e1507081d11">isManagingThread</a> () const</td></tr>
<tr class="separator:a9be275ae8cee993f727e2e1507081d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f8f97f6e899afeb435853b6ef96d86"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a57f8f97f6e899afeb435853b6ef96d86">getThreadCount</a> () const</td></tr>
<tr class="separator:a57f8f97f6e899afeb435853b6ef96d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8c87059e515ca3740fbe4bcbcdeeb697"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a8c87059e515ca3740fbe4bcbcdeeb697">hardwareConcurrency</a> ()</td></tr>
<tr class="memdesc:a8c87059e515ca3740fbe4bcbcdeeb697"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns optimal number of threads depending on the hardware capabilities.  <a href="classBeatmup_1_1ThreadPool.html#a8c87059e515ca3740fbe4bcbcdeeb697">More...</a><br /></td></tr>
<tr class="separator:a8c87059e515ca3740fbe4bcbcdeeb697"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3c127388e2387e2371100a6163b189c3"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespaceBeatmup.html#a916c7fdbab7370465d62d5cdd0ffceb2">PoolIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a></td></tr>
<tr class="memdesc:a3c127388e2387e2371100a6163b189c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">the index of the current pool  <a href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">More...</a><br /></td></tr>
<tr class="separator:a3c127388e2387e2371100a6163b189c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a409a6956769af2ddaee8cd86f6d1e7d3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a409a6956769af2ddaee8cd86f6d1e7d3">ThreadPool</a> (const <a class="el" href="classBeatmup_1_1ThreadPool.html">ThreadPool</a> &amp;)=delete</td></tr>
<tr class="separator:a409a6956769af2ddaee8cd86f6d1e7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a9159552506241b0888da30323766f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a3a9159552506241b0888da30323766f5">managingThreadFunc</a> (<a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;thread)</td></tr>
<tr class="memdesc:a3a9159552506241b0888da30323766f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Managing (#0) worker thread function.  <a href="classBeatmup_1_1ThreadPool.html#a3a9159552506241b0888da30323766f5">More...</a><br /></td></tr>
<tr class="separator:a3a9159552506241b0888da30323766f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd3bc83b7be4e6af71048c8b4dbfb5e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#abd3bc83b7be4e6af71048c8b4dbfb5e1">workerThreadFunc</a> (<a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;thread)</td></tr>
<tr class="memdesc:abd3bc83b7be4e6af71048c8b4dbfb5e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ordinary worker thread function.  <a href="classBeatmup_1_1ThreadPool.html#abd3bc83b7be4e6af71048c8b4dbfb5e1">More...</a><br /></td></tr>
<tr class="separator:abd3bc83b7be4e6af71048c8b4dbfb5e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89a37f0cab3dea3deac76b177aef391a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a89a37f0cab3dea3deac76b177aef391a">synchronizeThread</a> (<a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;thread)</td></tr>
<tr class="separator:a89a37f0cab3dea3deac76b177aef391a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a449fbdf1d57145ca8aa9b0ed8eca820e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a></td></tr>
<tr class="memdesc:a449fbdf1d57145ca8aa9b0ed8eca820e"><td class="mdescLeft">&#160;</td><td class="mdescRight">workers instances  <a href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">More...</a><br /></td></tr>
<tr class="separator:a449fbdf1d57145ca8aa9b0ed8eca820e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77602e85653f2f4a03e8c158affb0dd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a></td></tr>
<tr class="memdesc:ac77602e85653f2f4a03e8c158affb0dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">THE graphic pipeline to run tasks on GPU.  <a href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">More...</a><br /></td></tr>
<tr class="separator:ac77602e85653f2f4a03e8c158affb0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a241f2cc2b9b49ca83e890d1aa82560"><td class="memItemLeft" align="right" valign="top">std::deque&lt; <a class="el" href="structBeatmup_1_1ThreadPool_1_1JobContext.html">JobContext</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a></td></tr>
<tr class="memdesc:a3a241f2cc2b9b49ca83e890d1aa82560"><td class="mdescLeft">&#160;</td><td class="mdescRight">jobs queue  <a href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">More...</a><br /></td></tr>
<tr class="separator:a3a241f2cc2b9b49ca83e890d1aa82560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53c2c8bc95ae7b1b3a2af46af5541c3"><td class="memItemLeft" align="right" valign="top">std::deque&lt; std::exception_ptr &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a></td></tr>
<tr class="memdesc:ab53c2c8bc95ae7b1b3a2af46af5541c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">exceptions thrown in this pool  <a href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">More...</a><br /></td></tr>
<tr class="separator:ab53c2c8bc95ae7b1b3a2af46af5541c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bdf6f1fb93c7e9029da2a8dd7ac85a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structBeatmup_1_1ThreadPool_1_1JobContext.html">JobContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a></td></tr>
<tr class="memdesc:a6bdf6f1fb93c7e9029da2a8dd7ac85a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">job being run at the moment  <a href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">More...</a><br /></td></tr>
<tr class="separator:a6bdf6f1fb93c7e9029da2a8dd7ac85a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aad86ae4c8dd2c3d48ab8eed8e30dca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a7aad86ae4c8dd2c3d48ab8eed8e30dca">jobCounter</a></td></tr>
<tr class="separator:a7aad86ae4c8dd2c3d48ab8eed8e30dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2362e85ea03d927af76830baddfd1106"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a></td></tr>
<tr class="memdesc:a2362e85ea03d927af76830baddfd1106"><td class="mdescLeft">&#160;</td><td class="mdescRight">actual number of workers  <a href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">More...</a><br /></td></tr>
<tr class="separator:a2362e85ea03d927af76830baddfd1106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e2aac0ec5ac393175d99cb3cd1b0b85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a></td></tr>
<tr class="separator:a4e2aac0ec5ac393175d99cb3cd1b0b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada74faf95e27ccfa7896f9383d9a7351"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a></td></tr>
<tr class="memdesc:ada74faf95e27ccfa7896f9383d9a7351"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of workers performing the current task right now  <a href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">More...</a><br /></td></tr>
<tr class="separator:ada74faf95e27ccfa7896f9383d9a7351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3261bdba948afffe25169dd37dee800f"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a></td></tr>
<tr class="memdesc:a3261bdba948afffe25169dd37dee800f"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets notified about workers synchronization  <a href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">More...</a><br /></td></tr>
<tr class="separator:a3261bdba948afffe25169dd37dee800f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8de215d7e846856fdf8b36212bfb7fd"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a></td></tr>
<tr class="memdesc:ac8de215d7e846856fdf8b36212bfb7fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets notified about the jobs queue updates  <a href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">More...</a><br /></td></tr>
<tr class="separator:ac8de215d7e846856fdf8b36212bfb7fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcac3fe797948e728eec13fe3a219879"><td class="memItemLeft" align="right" valign="top">std::condition_variable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a></td></tr>
<tr class="memdesc:adcac3fe797948e728eec13fe3a219879"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets notified about workers lifecycle updates  <a href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">More...</a><br /></td></tr>
<tr class="separator:adcac3fe797948e728eec13fe3a219879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813593493fc6aa8c46670323308c210b"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a813593493fc6aa8c46670323308c210b">synchro</a></td></tr>
<tr class="memdesc:a813593493fc6aa8c46670323308c210b"><td class="mdescLeft">&#160;</td><td class="mdescRight">workers synchronization control within the current task  <a href="classBeatmup_1_1ThreadPool.html#a813593493fc6aa8c46670323308c210b">More...</a><br /></td></tr>
<tr class="separator:a813593493fc6aa8c46670323308c210b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a9d748240b0155c0929f5dcf1636c3e"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">workersAccess</a></td></tr>
<tr class="memdesc:a2a9d748240b0155c0929f5dcf1636c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">workers lifecycle access control  <a href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">More...</a><br /></td></tr>
<tr class="separator:a2a9d748240b0155c0929f5dcf1636c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e5b023082843f9d8a80b83dbedadf21"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a></td></tr>
<tr class="memdesc:a0e5b023082843f9d8a80b83dbedadf21"><td class="mdescLeft">&#160;</td><td class="mdescRight">jobs queue access control  <a href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">More...</a><br /></td></tr>
<tr class="separator:a0e5b023082843f9d8a80b83dbedadf21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa077fa97cde99f593ee903bb6d9b2eff"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a></td></tr>
<tr class="memdesc:aa077fa97cde99f593ee903bb6d9b2eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">exceptions queue access control  <a href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">More...</a><br /></td></tr>
<tr class="separator:aa077fa97cde99f593ee903bb6d9b2eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a727bf09d6d72767b4c78f1a1b4e21896"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a></td></tr>
<tr class="memdesc:a727bf09d6d72767b4c78f1a1b4e21896"><td class="mdescLeft">&#160;</td><td class="mdescRight">number of times synchronization is hit so far by all workers together  <a href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">More...</a><br /></td></tr>
<tr class="separator:a727bf09d6d72767b4c78f1a1b4e21896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9578289eba8f11d2bc43285a71c87cb4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a></td></tr>
<tr class="memdesc:a9578289eba8f11d2bc43285a71c87cb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">last sync hits count when all the workers were synchronized  <a href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">More...</a><br /></td></tr>
<tr class="separator:a9578289eba8f11d2bc43285a71c87cb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c9e2680dbe2e281d5105fa6936add07"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">isGpuTested</a></td></tr>
<tr class="memdesc:a8c9e2680dbe2e281d5105fa6936add07"><td class="mdescLeft">&#160;</td><td class="mdescRight">if <code>true</code>, there was an attempt to warm up the GPU  <a href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">More...</a><br /></td></tr>
<tr class="separator:a8c9e2680dbe2e281d5105fa6936add07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7fdd097345cf7a9cdd7672f77846768"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a></td></tr>
<tr class="memdesc:ab7fdd097345cf7a9cdd7672f77846768"><td class="mdescLeft">&#160;</td><td class="mdescRight">if <code>true</code>, the task is aborted externally  <a href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">More...</a><br /></td></tr>
<tr class="separator:ab7fdd097345cf7a9cdd7672f77846768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bec3edee3e37366101165852a46ad88"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a></td></tr>
<tr class="memdesc:a2bec3edee3e37366101165852a46ad88"><td class="mdescLeft">&#160;</td><td class="mdescRight">if <code>true</code>, the task aborts itself: beforeProcessing(), process() or processOnGPU() returned <code>false</code>  <a href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">More...</a><br /></td></tr>
<tr class="separator:a2bec3edee3e37366101165852a46ad88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f243f09bad1950b0af0829b3322efeb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a></td></tr>
<tr class="memdesc:a2f243f09bad1950b0af0829b3322efeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">communicates to all the threads that the current task is to skip because of a problem  <a href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">More...</a><br /></td></tr>
<tr class="separator:a2f243f09bad1950b0af0829b3322efeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ef9dfa6d0b2bdcdf04b6fa6e6adc317"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">repeatFlag</a></td></tr>
<tr class="memdesc:a5ef9dfa6d0b2bdcdf04b6fa6e6adc317"><td class="mdescLeft">&#160;</td><td class="mdescRight">if <code>true</code>, the current task is asked to be repeated  <a href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">More...</a><br /></td></tr>
<tr class="separator:a5ef9dfa6d0b2bdcdf04b6fa6e6adc317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa56f1daac7e0a1e315204e0162a1aaae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classBeatmup_1_1ThreadPool_1_1EventListener.html">EventListener</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a></td></tr>
<tr class="separator:aa56f1daac7e0a1e315204e0162a1aaae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A pool of threads running tasks <a class="el" href="classBeatmup_1_1ThreadPool.html" title="A pool of threads running tasks ThreadPool runs AbstractTasks, possibly in multiple threads.">ThreadPool</a> runs AbstractTasks, possibly in multiple threads. </p>
<p>Every time a task is submitted to the thread pool, it is scheduled for execution and gets attributed a corresponding Job number. Jobs are used to cancel the scheduled runs and track whether they have been conducted or not. Exceptions thrown during the tasks execution in different threads are rethrown in the caller threads. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00036">36</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a1d44394b531b8874cf96e6afd1460b08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d44394b531b8874cf96e6afd1460b08">&#9670;&nbsp;</a></span>TaskExecutionMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08">Beatmup::ThreadPool::TaskExecutionMode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Way how to the task should be run in the pool. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a1d44394b531b8874cf96e6afd1460b08a1e23852820b9154316c7c06e2b7ba051"></a>NORMAL&#160;</td><td class="fielddoc"><p>normal task, should be run it once </p>
</td></tr>
<tr><td class="fieldname"><a id="a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971"></a>PERSISTENT&#160;</td><td class="fielddoc"><p>persistent task, run process() until it returns <code>false</code> </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00078">78</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                 {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        NORMAL,         <span class="comment">//!&lt; normal task, should be run it once</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        PERSISTENT      <span class="comment">//!&lt; persistent task, run process() until it returns `false`</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a409a6956769af2ddaee8cd86f6d1e7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a409a6956769af2ddaee8cd86f6d1e7d3">&#9670;&nbsp;</a></span>ThreadPool() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Beatmup::ThreadPool::ThreadPool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBeatmup_1_1ThreadPool.html">ThreadPool</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a031550562217308d1e74803cecf04d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031550562217308d1e74803cecf04d88">&#9670;&nbsp;</a></span>ThreadPool() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Beatmup::ThreadPool::ThreadPool </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceBeatmup.html#a916c7fdbab7370465d62d5cdd0ffceb2">PoolIndex</a>&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td>
          <td class="paramname"><em>limitThreadCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1ThreadPool_1_1EventListener.html">EventListener</a> &amp;&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00454">454</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                                                                                                           :</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>(<span class="keyword">nullptr</span>),</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>{0, <span class="keyword">nullptr</span>},</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a7aad86ae4c8dd2c3d48ab8eed8e30dca">jobCounter</a>(1),</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>(limitThreadCount),</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a>(0), <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a>(0),</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a>(0), <a class="code" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a>(0),</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">isGpuTested</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a>(<span class="keyword">false</span>), <a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>(<span class="keyword">false</span>), <a class="code" href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">repeatFlag</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>(<a class="code" href="wrapper__core_8cpp.html#acd6ab278aeebd37b39002e29dfa11a3b">listener</a>),</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>(<a class="code" href="wrapper__core_8cpp.html#a6d0b01a0115cc0fcc394f07c0d5a43d4">index</a>)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a> = <span class="keyword">new</span> TaskThreadImpl*[<a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>];</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="comment">// spawning workers</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = 0; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t] = <span class="keyword">new</span> TaskThreadImpl(t, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }</div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a2362e85ea03d927af76830baddfd1106"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">Beatmup::ThreadPool::threadCount</a></div><div class="ttdeci">ThreadIndex threadCount</div><div class="ttdoc">actual number of workers</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00421">thread_pool.hpp:421</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a2bec3edee3e37366101165852a46ad88"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">Beatmup::ThreadPool::abortInternally</a></div><div class="ttdeci">bool abortInternally</div><div class="ttdoc">if true, the task aborts itself: beforeProcessing(), process() or processOnGPU() returned false</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00445">thread_pool.hpp:445</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a2f243f09bad1950b0af0829b3322efeb"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">Beatmup::ThreadPool::failFlag</a></div><div class="ttdeci">bool failFlag</div><div class="ttdoc">communicates to all the threads that the current task is to skip because of a problem</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00446">thread_pool.hpp:446</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a3c127388e2387e2371100a6163b189c3"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">Beatmup::ThreadPool::myIndex</a></div><div class="ttdeci">const PoolIndex myIndex</div><div class="ttdoc">the index of the current pool</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00452">thread_pool.hpp:452</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a449fbdf1d57145ca8aa9b0ed8eca820e"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">Beatmup::ThreadPool::workers</a></div><div class="ttdeci">TaskThreadImpl ** workers</div><div class="ttdoc">workers instances</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00410">thread_pool.hpp:410</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a4e2aac0ec5ac393175d99cb3cd1b0b85"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">Beatmup::ThreadPool::currentWorkerCount</a></div><div class="ttdeci">ThreadIndex currentWorkerCount</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00424">thread_pool.hpp:424</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a5ef9dfa6d0b2bdcdf04b6fa6e6adc317"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">Beatmup::ThreadPool::repeatFlag</a></div><div class="ttdeci">bool repeatFlag</div><div class="ttdoc">if true, the current task is asked to be repeated</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00447">thread_pool.hpp:447</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a6bdf6f1fb93c7e9029da2a8dd7ac85a8"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">Beatmup::ThreadPool::currentJob</a></div><div class="ttdeci">JobContext currentJob</div><div class="ttdoc">job being run at the moment</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00418">thread_pool.hpp:418</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a727bf09d6d72767b4c78f1a1b4e21896"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">Beatmup::ThreadPool::syncHitsCount</a></div><div class="ttdeci">int syncHitsCount</div><div class="ttdoc">number of times synchronization is hit so far by all workers together</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00439">thread_pool.hpp:439</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a7aad86ae4c8dd2c3d48ab8eed8e30dca"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a7aad86ae4c8dd2c3d48ab8eed8e30dca">Beatmup::ThreadPool::jobCounter</a></div><div class="ttdeci">Job jobCounter</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00419">thread_pool.hpp:419</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a8c9e2680dbe2e281d5105fa6936add07"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">Beatmup::ThreadPool::isGpuTested</a></div><div class="ttdeci">bool isGpuTested</div><div class="ttdoc">if true, there was an attempt to warm up the GPU</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00443">thread_pool.hpp:443</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a9578289eba8f11d2bc43285a71c87cb4"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">Beatmup::ThreadPool::syncHitsBound</a></div><div class="ttdeci">int syncHitsBound</div><div class="ttdoc">last sync hits count when all the workers were synchronized</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00440">thread_pool.hpp:440</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_aa56f1daac7e0a1e315204e0162a1aaae"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">Beatmup::ThreadPool::eventListener</a></div><div class="ttdeci">EventListener &amp; eventListener</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00449">thread_pool.hpp:449</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_ab7fdd097345cf7a9cdd7672f77846768"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">Beatmup::ThreadPool::abortExternally</a></div><div class="ttdeci">bool abortExternally</div><div class="ttdoc">if true, the task is aborted externally</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00444">thread_pool.hpp:444</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_ac77602e85653f2f4a03e8c158affb0dd"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">Beatmup::ThreadPool::gpu</a></div><div class="ttdeci">GraphicPipeline * gpu</div><div class="ttdoc">THE graphic pipeline to run tasks on GPU.</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00412">thread_pool.hpp:412</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_ada74faf95e27ccfa7896f9383d9a7351"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">Beatmup::ThreadPool::remainingWorkers</a></div><div class="ttdeci">ThreadIndex remainingWorkers</div><div class="ttdoc">number of workers performing the current task right now</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00425">thread_pool.hpp:425</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_a6554f68f718b6c892b3cab99af6dbcdd"><div class="ttname"><a href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">Beatmup::ThreadIndex</a></div><div class="ttdeci">unsigned char ThreadIndex</div><div class="ttdoc">number of threads / thread index</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8h_source.html#l00068">parallelism.h:68</a></div></div>
<div class="ttc" id="awrapper__core_8cpp_html_a6d0b01a0115cc0fcc394f07c0d5a43d4"><div class="ttname"><a href="wrapper__core_8cpp.html#a6d0b01a0115cc0fcc394f07c0d5a43d4">index</a></div><div class="ttdeci">jlong jint index</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__core_8cpp_source.html#l00434">wrapper_core.cpp:434</a></div></div>
<div class="ttc" id="awrapper__core_8cpp_html_acd6ab278aeebd37b39002e29dfa11a3b"><div class="ttname"><a href="wrapper__core_8cpp.html#acd6ab278aeebd37b39002e29dfa11a3b">listener</a></div><div class="ttdeci">Beatmup::Context::EventListener * listener</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__core_8cpp_source.html#l00115">wrapper_core.cpp:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4eb62d42cdda944d75e291b16a2adf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4eb62d42cdda944d75e291b16a2adf1">&#9670;&nbsp;</a></span>~ThreadPool()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Beatmup::ThreadPool::~ThreadPool </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00474">474</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                         {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="comment">// set termination flags</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        {</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            std::lock_guard&lt;std::mutex&gt; lockJobs(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>), lockWorkers(<a class="code" href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">workersAccess</a>), lockSync(<a class="code" href="classBeatmup_1_1ThreadPool.html#a813593493fc6aa8c46670323308c210b">synchro</a>);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = 0; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t]-&gt;isTerminating = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.notify_all();</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.notify_all();</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// no wait here!</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = 0; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++) {</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t]-&gt;<a class="code" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html#ac84c11f154397b38aedbef438ca8fbc7">internalThread</a>.join();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        }</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        <span class="keyword">delete</span>[] <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    }</div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1TaskThreadImpl_html_ac84c11f154397b38aedbef438ca8fbc7"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html#ac84c11f154397b38aedbef438ca8fbc7">Beatmup::ThreadPool::TaskThreadImpl::internalThread</a></div><div class="ttdeci">std::thread internalThread</div><div class="ttdoc">worker thread</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00070">thread_pool.hpp:70</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a0e5b023082843f9d8a80b83dbedadf21"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">Beatmup::ThreadPool::jobsAccess</a></div><div class="ttdeci">std::mutex jobsAccess</div><div class="ttdoc">jobs queue access control</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00435">thread_pool.hpp:435</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a2a9d748240b0155c0929f5dcf1636c3e"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">Beatmup::ThreadPool::workersAccess</a></div><div class="ttdeci">std::mutex workersAccess</div><div class="ttdoc">workers lifecycle access control</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00434">thread_pool.hpp:434</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a3261bdba948afffe25169dd37dee800f"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">Beatmup::ThreadPool::synchroCvar</a></div><div class="ttdeci">std::condition_variable synchroCvar</div><div class="ttdoc">gets notified about workers synchronization</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00428">thread_pool.hpp:428</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a813593493fc6aa8c46670323308c210b"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a813593493fc6aa8c46670323308c210b">Beatmup::ThreadPool::synchro</a></div><div class="ttdeci">std::mutex synchro</div><div class="ttdoc">workers synchronization control within the current task</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00433">thread_pool.hpp:433</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_ac8de215d7e846856fdf8b36212bfb7fd"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">Beatmup::ThreadPool::jobsCvar</a></div><div class="ttdeci">std::condition_variable jobsCvar</div><div class="ttdoc">gets notified about the jobs queue updates</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00429">thread_pool.hpp:429</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_adcac3fe797948e728eec13fe3a219879"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">Beatmup::ThreadPool::workersCvar</a></div><div class="ttdeci">std::condition_variable workersCvar</div><div class="ttdoc">gets notified about workers lifecycle updates</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00430">thread_pool.hpp:430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a3a9159552506241b0888da30323766f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a9159552506241b0888da30323766f5">&#9670;&nbsp;</a></span>managingThreadFunc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::managingThreadFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Managing (#0) worker thread function. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00141">141</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                                           {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a6a1ed88573534ee8642e5ca8bc52ad94">threadCreated</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="comment">// locks</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>, std::defer_lock);</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        std::unique_lock&lt;std::mutex&gt; workersLock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">workersAccess</a>, std::defer_lock);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">while</span> (!thread.isTerminating) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="comment">// wait while a task is got</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            lock.lock();</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty() &amp;&amp; !thread.isTerminating)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.wait(lock);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (thread.isTerminating) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                lock.unlock();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="comment">// fetch a task</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a> = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a> = 0;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">repeatFlag</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty()) {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.front();</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a> = <a class="code" href="namespacestd.html#a3c5c7d7eaab4f8e67e2d0970121375dd">std::min</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#adb565a751cc0915a088a69857deed8ae">getMaxThreads</a>(), <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">// release queue access</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            lock.unlock();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="comment">// test execution mode</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378">AbstractTask::TaskDeviceRequirement</a> exTarget;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="keywordtype">bool</span> useGpuForCurrentTask = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                exTarget = <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#a4bd6b0e5d647233c4d6ff46afdaeeba4">getUsedDevices</a>();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                <span class="keywordflow">if</span> (exTarget != <a class="code" href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378a9393911bc06bdfb0c3663d541246e15a">AbstractTask::TaskDeviceRequirement::CPU_ONLY</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a> == 0) {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                    <span class="comment">// test GPU if not yet</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">isGpuTested</a>) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> = <span class="keyword">new</span> GraphicPipeline();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a9c3f218290e728610d378b7194c3dd00">gpuInitFail</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, std::current_exception());</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                            std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.push_back(std::current_exception());</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        <a class="code" href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">isGpuTested</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    useGpuForCurrentTask = (<a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> != <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                }</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                <span class="comment">// run beforeProcessing</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    <span class="keywordflow">if</span> (!useGpuForCurrentTask &amp;&amp; exTarget == <a class="code" href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378a95c8166e4f408834884bbe57fef928f6">AbstractTask::TaskDeviceRequirement::GPU_ONLY</a>)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <span class="keywordflow">throw</span> <a class="code" href="classBeatmup_1_1RuntimeError.html">Beatmup::RuntimeError</a>(</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a> == 0 ?</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            <span class="stringliteral">&quot;A task requires GPU, but GPU init is failed&quot;</span> :</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                            <span class="stringliteral">&quot;A task requiring GPU may only be run in the main pool&quot;</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        );</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#a7fad9c9c1f2144cbb5e8c0e4098da33e">beforeProcessing</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a>, useGpuForCurrentTask ? <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a> : <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>, <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a2c1f8dd1f02e7be9fb12699388a2ed43">taskFail</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, *<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>, std::current_exception());</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.push_back(std::current_exception());</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="comment">// drop the task if failed</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    lock.lock();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.pop_front();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                    lock.unlock();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                }</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160; </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="comment">// if failed, go to next iteration</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">// send a signal to threads waiting for the task to finish</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="comment">// wake up workers</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            workersLock.lock();</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = 0; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t]-&gt;isRunning = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            workersLock.unlock();</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.notify_all();    <span class="comment">// go!</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            <span class="comment">// do the job</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        <span class="keywordtype">bool</span> <a class="code" href="wrapper__core_8cpp.html#ade6d6d18a46c8aa95eed5e179d003e45">result</a> = useGpuForCurrentTask ? <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#aa4ac3906a0b149e17bf2d1aac4dc8230">processOnGPU</a>(*<a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>, thread) : <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#af72c3d18405559ea79f579119205fe5f">process</a>(thread);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="wrapper__core_8cpp.html#ade6d6d18a46c8aa95eed5e179d003e45">result</a>) {</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            <a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                        }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                    } <span class="keywordflow">while</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a56b4234125e2ed0fc6508f83274b75d6">mode</a> == <a class="code" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971">TaskExecutionMode::PERSISTENT</a> &amp;&amp; !<a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a> &amp;&amp; !<a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">catch</span> (AnotherThreadFailed) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    <span class="comment">// nothing special to do here</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a2c1f8dd1f02e7be9fb12699388a2ed43">taskFail</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, *<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>, std::current_exception());</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.push_back(std::current_exception());</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            <span class="comment">// finalizing</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            workersLock.lock();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="comment">// decrease remaining workers count</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a>--;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            <span class="comment">// notify other workers if they&#39;re waiting for synchro</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.notify_all();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <span class="comment">// wait until all the workers stop</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">while</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a> &gt; 0 &amp;&amp; !thread.isTerminating)</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.wait(workersLock);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// call afterProcessing</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractTask.html#aee50a3a92015e54d31b26b8943b14be9">afterProcessing</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a>, useGpuForCurrentTask ? <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> : <span class="keyword">nullptr</span>, <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a>);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                }</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a2c1f8dd1f02e7be9fb12699388a2ed43">taskFail</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, *<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>, std::current_exception());</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                    std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.push_back(std::current_exception());</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            workersLock.unlock();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="comment">// unlock graphic pipeline, if used</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span> (useGpuForCurrentTask &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>) {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>-&gt;<a class="code" href="classBeatmup_1_1GraphicPipeline.html#ab0a2a72fe26170627895c79028415fcd">flush</a>();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;            }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <span class="comment">// call taskDone, ask if want to repeat</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="keywordtype">bool</span> internalRepeatFlag = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                internalRepeatFlag = <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a1453776f3d71870f7d30bd31b531ee3f">taskDone</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, *<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a>, <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a>);</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160; </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            <span class="comment">// drop the task</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            lock.lock();</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            <span class="keywordflow">if</span> (!(<a class="code" href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">repeatFlag</a> || internalRepeatFlag) || <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>) {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.pop_front();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160; </div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="comment">// send a signal to threads waiting for the task to finish</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            lock.unlock();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#acba3fd3a648b3a926f69d97d8dd78db3">threadTerminating</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="comment">// deleting graphic pipeline instance</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a> == 0)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_a31c8ef6e96afb289bb67951d714fc378"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378">Beatmup::AbstractTask::TaskDeviceRequirement</a></div><div class="ttdeci">TaskDeviceRequirement</div><div class="ttdoc">Specifies which device (CPU and/or GPU) is used to run the task.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8h_source.html#l00095">parallelism.h:95</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_a31c8ef6e96afb289bb67951d714fc378a9393911bc06bdfb0c3663d541246e15a"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378a9393911bc06bdfb0c3663d541246e15a">Beatmup::AbstractTask::TaskDeviceRequirement::CPU_ONLY</a></div><div class="ttdeci">@ CPU_ONLY</div><div class="ttdoc">this task does not use GPU</div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_a31c8ef6e96afb289bb67951d714fc378a95c8166e4f408834884bbe57fef928f6"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#a31c8ef6e96afb289bb67951d714fc378a95c8166e4f408834884bbe57fef928f6">Beatmup::AbstractTask::TaskDeviceRequirement::GPU_ONLY</a></div><div class="ttdeci">@ GPU_ONLY</div><div class="ttdoc">this task requires GPU, otherwise it cannot run</div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_a4bd6b0e5d647233c4d6ff46afdaeeba4"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#a4bd6b0e5d647233c4d6ff46afdaeeba4">Beatmup::AbstractTask::getUsedDevices</a></div><div class="ttdeci">virtual TaskDeviceRequirement getUsedDevices() const</div><div class="ttdoc">Communicates devices (CPU and/or GPU) the task is run on.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8cpp_source.html#l00054">parallelism.cpp:54</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_a7fad9c9c1f2144cbb5e8c0e4098da33e"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#a7fad9c9c1f2144cbb5e8c0e4098da33e">Beatmup::AbstractTask::beforeProcessing</a></div><div class="ttdeci">virtual void beforeProcessing(ThreadIndex threadCount, ProcessingTarget target, GraphicPipeline *gpu)</div><div class="ttdoc">Instruction called before the task is executed.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8cpp_source.html#l00024">parallelism.cpp:24</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_aa4ac3906a0b149e17bf2d1aac4dc8230"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#aa4ac3906a0b149e17bf2d1aac4dc8230">Beatmup::AbstractTask::processOnGPU</a></div><div class="ttdeci">virtual bool processOnGPU(GraphicPipeline &amp;gpu, TaskThread &amp;thread)</div><div class="ttdoc">Executes the task on GPU.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8cpp_source.html#l00034">parallelism.cpp:34</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_adb565a751cc0915a088a69857deed8ae"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#adb565a751cc0915a088a69857deed8ae">Beatmup::AbstractTask::getMaxThreads</a></div><div class="ttdeci">virtual ThreadIndex getMaxThreads() const</div><div class="ttdoc">Gives the upper limint on the number of threads the task may be performed by.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8cpp_source.html#l00040">parallelism.cpp:40</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_aee50a3a92015e54d31b26b8943b14be9"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#aee50a3a92015e54d31b26b8943b14be9">Beatmup::AbstractTask::afterProcessing</a></div><div class="ttdeci">virtual void afterProcessing(ThreadIndex threadCount, GraphicPipeline *gpu, bool aborted)</div><div class="ttdoc">Instruction called after the task is executed.</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8cpp_source.html#l00029">parallelism.cpp:29</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractTask_html_af72c3d18405559ea79f579119205fe5f"><div class="ttname"><a href="classBeatmup_1_1AbstractTask.html#af72c3d18405559ea79f579119205fe5f">Beatmup::AbstractTask::process</a></div><div class="ttdeci">virtual bool process(TaskThread &amp;thread)=0</div><div class="ttdoc">Executes the task on CPU within a given thread.</div></div>
<div class="ttc" id="aclassBeatmup_1_1GraphicPipeline_html_ab0a2a72fe26170627895c79028415fcd"><div class="ttname"><a href="classBeatmup_1_1GraphicPipeline.html#ab0a2a72fe26170627895c79028415fcd">Beatmup::GraphicPipeline::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdoc">Waits until all operations submitted to GPU are finished.</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8cpp_source.html#l00931">pipeline.cpp:931</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1RuntimeError_html"><div class="ttname"><a href="classBeatmup_1_1RuntimeError.html">Beatmup::RuntimeError</a></div><div class="ttdef"><b>Definition:</b> <a href="exception_8h_source.html#l00061">exception.h:61</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1EventListener_html_a1453776f3d71870f7d30bd31b531ee3f"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a1453776f3d71870f7d30bd31b531ee3f">Beatmup::ThreadPool::EventListener::taskDone</a></div><div class="ttdeci">virtual bool taskDone(PoolIndex pool, AbstractTask &amp;task, bool aborted)</div><div class="ttdoc">Callback function called when a task is done or cancelled; if returns true, the task will be repeated...</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00106">thread_pool.hpp:106</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1EventListener_html_a2c1f8dd1f02e7be9fb12699388a2ed43"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a2c1f8dd1f02e7be9fb12699388a2ed43">Beatmup::ThreadPool::EventListener::taskFail</a></div><div class="ttdeci">virtual void taskFail(PoolIndex pool, AbstractTask &amp;task, const std::exception_ptr exPtr)</div><div class="ttdoc">Callback function called when an exception is thrown.</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00116">thread_pool.hpp:116</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1EventListener_html_a6a1ed88573534ee8642e5ca8bc52ad94"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a6a1ed88573534ee8642e5ca8bc52ad94">Beatmup::ThreadPool::EventListener::threadCreated</a></div><div class="ttdeci">virtual void threadCreated(PoolIndex pool)</div><div class="ttdoc">Callback function called when a new worker thread is created.</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00092">thread_pool.hpp:92</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1EventListener_html_a9c3f218290e728610d378b7194c3dd00"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a9c3f218290e728610d378b7194c3dd00">Beatmup::ThreadPool::EventListener::gpuInitFail</a></div><div class="ttdeci">virtual void gpuInitFail(PoolIndex pool, const std::exception_ptr exPtr)</div><div class="ttdoc">Callback function called when the GPU cannot start.</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00123">thread_pool.hpp:123</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_1_1EventListener_html_acba3fd3a648b3a926f69d97d8dd78db3"><div class="ttname"><a href="classBeatmup_1_1ThreadPool_1_1EventListener.html#acba3fd3a648b3a926f69d97d8dd78db3">Beatmup::ThreadPool::EventListener::threadTerminating</a></div><div class="ttdeci">virtual void threadTerminating(PoolIndex pool)</div><div class="ttdoc">Callback function called when a worker thread is terminating.</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00098">thread_pool.hpp:98</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971">Beatmup::ThreadPool::TaskExecutionMode::PERSISTENT</a></div><div class="ttdeci">@ PERSISTENT</div><div class="ttdoc">persistent task, run process() until it returns false</div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a3a241f2cc2b9b49ca83e890d1aa82560"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">Beatmup::ThreadPool::jobs</a></div><div class="ttdeci">std::deque&lt; JobContext &gt; jobs</div><div class="ttdoc">jobs queue</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00414">thread_pool.hpp:414</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_aa077fa97cde99f593ee903bb6d9b2eff"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">Beatmup::ThreadPool::exceptionsAccess</a></div><div class="ttdeci">std::mutex exceptionsAccess</div><div class="ttdoc">exceptions queue access control</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00436">thread_pool.hpp:436</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_ab53c2c8bc95ae7b1b3a2af46af5541c3"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">Beatmup::ThreadPool::exceptions</a></div><div class="ttdeci">std::deque&lt; std::exception_ptr &gt; exceptions</div><div class="ttdoc">exceptions thrown in this pool</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00416">thread_pool.hpp:416</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f"><div class="ttname"><a href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">Beatmup::CPU</a></div><div class="ttdeci">@ CPU</div><div class="ttdef"><b>Definition:</b> <a href="basic__types_8h_source.html#l00055">basic_types.h:55</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e"><div class="ttname"><a href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">Beatmup::GPU</a></div><div class="ttdeci">@ GPU</div><div class="ttdef"><b>Definition:</b> <a href="basic__types_8h_source.html#l00055">basic_types.h:55</a></div></div>
<div class="ttc" id="anamespacestd_html_a3c5c7d7eaab4f8e67e2d0970121375dd"><div class="ttname"><a href="namespacestd.html#a3c5c7d7eaab4f8e67e2d0970121375dd">std::min</a></div><div class="ttdeci">CustomPoint&lt; numeric &gt; min(const CustomPoint&lt; numeric &gt; &amp;a, const CustomPoint&lt; numeric &gt; &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="geometry_8h_source.html#l00724">geometry.h:724</a></div></div>
<div class="ttc" id="astructBeatmup_1_1ThreadPool_1_1JobContext_html_a2893d1d8afc360c48c43cf955534ef5a"><div class="ttname"><a href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">Beatmup::ThreadPool::JobContext::task</a></div><div class="ttdeci">AbstractTask * task</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00406">thread_pool.hpp:406</a></div></div>
<div class="ttc" id="astructBeatmup_1_1ThreadPool_1_1JobContext_html_a56b4234125e2ed0fc6508f83274b75d6"><div class="ttname"><a href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a56b4234125e2ed0fc6508f83274b75d6">Beatmup::ThreadPool::JobContext::mode</a></div><div class="ttdeci">TaskExecutionMode mode</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00407">thread_pool.hpp:407</a></div></div>
<div class="ttc" id="awrapper__core_8cpp_html_ade6d6d18a46c8aa95eed5e179d003e45"><div class="ttname"><a href="wrapper__core_8cpp.html#ade6d6d18a46c8aa95eed5e179d003e45">result</a></div><div class="ttdeci">Beatmup::IntPoint result</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__core_8cpp_source.html#l00256">wrapper_core.cpp:256</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abd3bc83b7be4e6af71048c8b4dbfb5e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd3bc83b7be4e6af71048c8b4dbfb5e1">&#9670;&nbsp;</a></span>workerThreadFunc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::workerThreadFunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ordinary worker thread function. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00317">317</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                                                         {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a6a1ed88573534ee8642e5ca8bc52ad94">threadCreated</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">workersAccess</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <a class="code" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> myLastJob = (<a class="code" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>)-1;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">while</span> (!thread.isTerminating) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="comment">// wait for a job</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">while</span> ((!thread.isRunning || thread.index &gt;= <a class="code" href="classBeatmup_1_1ThreadPool.html#a4e2aac0ec5ac393175d99cb3cd1b0b85">currentWorkerCount</a> || myLastJob - <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a4cf7b241b45430d8c848b75ac48ae126">id</a> &gt;= 0)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    &amp;&amp; !thread.isTerminating)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                std::this_thread::yield();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.wait(lock);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (thread.isTerminating) {</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                lock.unlock();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            }</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment">// do the job</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            JobContext <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            lock.unlock();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="comment">/* UNLOCKED SECTION */</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>.task-&gt;process(thread)) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        <a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                } <span class="keywordflow">while</span> (<a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>.mode == <a class="code" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971">TaskExecutionMode::PERSISTENT</a> &amp;&amp; !<a class="code" href="classBeatmup_1_1ThreadPool.html#a2bec3edee3e37366101165852a46ad88">abortInternally</a> &amp;&amp; !<a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a> &amp;&amp; !thread.isTerminating);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="keywordflow">catch</span> (AnotherThreadFailed) {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="comment">// nothing special to do here</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#a2c1f8dd1f02e7be9fb12699388a2ed43">taskFail</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>, *<a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>.task, std::current_exception());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.push_back(std::current_exception());</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">// finalizing</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            lock.lock();</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">// decrease remaining workers count</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            myLastJob = <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>.id;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a>--;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="comment">// notify other workers if they&#39;re waiting for synchro</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.notify_all();</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="comment">// stop</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            thread.isRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            <span class="comment">// send a signal to other workers</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.notify_all();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160; </div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#aa56f1daac7e0a1e315204e0162a1aaae">eventListener</a>.<a class="code" href="classBeatmup_1_1ThreadPool_1_1EventListener.html#acba3fd3a648b3a926f69d97d8dd78db3">threadTerminating</a>(<a class="code" href="classBeatmup_1_1ThreadPool.html#a3c127388e2387e2371100a6163b189c3">myIndex</a>);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    }</div>
<div class="ttc" id="anamespaceBeatmup_html_a951a7768b54be9eac094e07049123290"><div class="ttname"><a href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Beatmup::Job</a></div><div class="ttdeci">int Job</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8h_source.html#l00069">parallelism.h:69</a></div></div>
<div class="ttc" id="astructBeatmup_1_1ThreadPool_1_1JobContext_html_a4cf7b241b45430d8c848b75ac48ae126"><div class="ttname"><a href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a4cf7b241b45430d8c848b75ac48ae126">Beatmup::ThreadPool::JobContext::id</a></div><div class="ttdeci">Job id</div><div class="ttdef"><b>Definition:</b> <a href="thread__pool_8hpp_source.html#l00405">thread_pool.hpp:405</a></div></div>
<div class="ttc" id="awrapper__core_8cpp_html_aa6ba1d5227cb02120a2776fb5b76ca81"><div class="ttname"><a href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a></div><div class="ttdeci">JNIEnv jlong jint jint job</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__core_8cpp_source.html#l00182">wrapper_core.cpp:183</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89a37f0cab3dea3deac76b177aef391a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89a37f0cab3dea3deac76b177aef391a">&#9670;&nbsp;</a></span>synchronizeThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::synchronizeThread </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a> &amp;&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00377">377</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                                          {</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a813593493fc6aa8c46670323308c210b">synchro</a>);    <span class="comment">//&lt;------- LOCKING HERE</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a>++;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        <span class="comment">// check if this thread is the last one passing the synchronization point</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a> &gt;= <a class="code" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a> + <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a>) {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            lock.unlock();    <span class="comment">//&lt;------- UNLOCKING HERE</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="comment">// do not block, wake up the others</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.notify_all();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="comment">// Wait while other threads reach this synchronization point or the remaining number of workers drops</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="comment">// (at the end of the task), or pool is terminating.</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            <span class="comment">// Do not check if the task aborted here to keep threads synchronized.</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> myBound = <a class="code" href="classBeatmup_1_1ThreadPool.html#a9578289eba8f11d2bc43285a71c87cb4">syncHitsBound</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="keywordflow">while</span> (!thread.isTerminating  &amp;&amp;  !<a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>  &amp;&amp;  myBound + <a class="code" href="classBeatmup_1_1ThreadPool.html#ada74faf95e27ccfa7896f9383d9a7351">remainingWorkers</a> - <a class="code" href="classBeatmup_1_1ThreadPool.html#a727bf09d6d72767b4c78f1a1b4e21896">syncHitsCount</a> &gt; 0)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.wait(lock);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            lock.unlock();    <span class="comment">//&lt;------- UNLOCKING HERE</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a2f243f09bad1950b0af0829b3322efeb">failFlag</a>)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            <span class="keywordflow">throw</span> AnotherThreadFailed();</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4131521b4d10c5a6c44c7ff0325d26e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4131521b4d10c5a6c44c7ff0325d26e">&#9670;&nbsp;</a></span>check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the thread pool is doing great. </p>
<p>If not, i.e., if there was an exception, rethrows the exception. There might be multiple exceptions in the queue. They are thrown one by one every time this function is called. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00499">499</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#aa077fa97cde99f593ee903bb6d9b2eff">exceptionsAccess</a>);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.empty()) {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            std::exception_ptr pointer(<a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.front());</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ab53c2c8bc95ae7b1b3a2af46af5541c3">exceptions</a>.pop_front();</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;            std::rethrow_exception(pointer);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0520ed6916222f94baef73e21df4c625"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0520ed6916222f94baef73e21df4c625">&#9670;&nbsp;</a></span>resize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::resize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>&#160;</td>
          <td class="paramname"><em>newThreadCount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resizes the pool. </p>
<p>Blocking if there is a task running. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newThreadCount</td><td>The new number of worker threads </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00514">514</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                                                   {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        <span class="keywordflow">if</span> (newThreadCount == <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>)</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        std::unique_lock&lt;std::mutex&gt; jobsLock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <span class="comment">// wait for task, if any</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty())</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.wait(jobsLock);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        std::unique_lock&lt;std::mutex&gt; workersLock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a2a9d748240b0155c0929f5dcf1636c3e">workersAccess</a>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// set termination flags for threads to be stopped, if any</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = newThreadCount; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++)</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t]-&gt;isTerminating = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <span class="comment">// unlock and notify</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        workersLock.unlock();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a3261bdba948afffe25169dd37dee800f">synchroCvar</a>.notify_all();</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#adcac3fe797948e728eec13fe3a219879">workersCvar</a>.notify_all();</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        <span class="comment">// join</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = newThreadCount; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t]-&gt;<a class="code" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html#ac84c11f154397b38aedbef438ca8fbc7">internalThread</a>.join();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="keyword">delete</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t];</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160; </div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="comment">// spawn new threads if needed</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        workersLock.lock();</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a> &lt; newThreadCount) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            TaskThreadImpl** newWorkers = <span class="keyword">new</span> TaskThreadImpl*[newThreadCount];</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = 0; t &lt; <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t++)</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                newWorkers[t] = <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[t];</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> t = <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; t &lt; newThreadCount; t++)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                newWorkers[t] = <span class="keyword">new</span> TaskThreadImpl(t, *<span class="keyword">this</span>);</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;            <span class="keyword">delete</span>[] <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a> = newWorkers;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="comment">// update thread count</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a> = newThreadCount;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        workersLock.unlock();</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        jobsLock.unlock();</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a00b8c13fab602668a6428eb790ab73b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b8c13fab602668a6428eb790ab73b7">&#9670;&nbsp;</a></span>submitTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> Beatmup::ThreadPool::submitTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractTask.html">AbstractTask</a> &amp;&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08">TaskExecutionMode</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a new task to the jobs queue. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00561">561</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                                                            {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a7aad86ae4c8dd2c3d48ab8eed8e30dca">jobCounter</a>++;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="comment">// add new job</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.emplace_back(JobContext{<a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>, &amp;<a class="code" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>, <a class="code" href="wrapper__imag_8cpp.html#a31fdae971e9dea189b6b79d3a91339cc">mode</a>});</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160; </div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        lock.unlock();</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    }</div>
<div class="ttc" id="awrapper__imag_8cpp_html_a31fdae971e9dea189b6b79d3a91339cc"><div class="ttname"><a href="wrapper__imag_8cpp.html#a31fdae971e9dea189b6b79d3a91339cc">mode</a></div><div class="ttdeci">JNIEnv jlong jint mode</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__imag_8cpp_source.html#l01045">wrapper_imag.cpp:1046</a></div></div>
<div class="ttc" id="awrapper__nnets_8cpp_html_a9fec189bd48827e84d130a15e2c373d3"><div class="ttname"><a href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a></div><div class="ttdeci">Beatmup::NNets::InferenceTask * task</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__nnets_8cpp_source.html#l00179">wrapper_nnets.cpp:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a913cab5f5d03eb40ca7c690c1546e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a913cab5f5d03eb40ca7c690c1546e6">&#9670;&nbsp;</a></span>repeatTask()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> Beatmup::ThreadPool::repeatTask </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractTask.html">AbstractTask</a> &amp;&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>abortCurrent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensures a given task executed at least once. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>The task </td></tr>
    <tr><td class="paramname">abortCurrent</td><td>if <code>true</code> and the task is currently running, abort signal is sent. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00579">579</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                                                 {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160; </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="comment">// check if the rask is running now, ask for repeat if it is</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty() &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.front().task == &amp;<a class="code" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">repeatFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            <span class="keywordflow">if</span> (abortCurrent)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.front().id;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="comment">// check whether it is in the queue</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> JobContext&amp; _ : <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            <span class="keywordflow">if</span> (_.task == &amp;<a class="code" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                <span class="keywordflow">return</span> _.id;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="comment">// otherwise submit the task</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <span class="keyword">const</span> <a class="code" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a> = <a class="code" href="classBeatmup_1_1ThreadPool.html#a7aad86ae4c8dd2c3d48ab8eed8e30dca">jobCounter</a>++;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.emplace_back(JobContext{</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>,</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;            &amp;<a class="code" href="wrapper__nnets_8cpp.html#a9fec189bd48827e84d130a15e2c373d3">task</a>,</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1e23852820b9154316c7c06e2b7ba051">TaskExecutionMode::NORMAL</a></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        });</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="comment">// unlock the jobs access, notify workers</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        lock.unlock();</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.notify_all();</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>;</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div>
<div class="ttc" id="aclassBeatmup_1_1ThreadPool_html_a1d44394b531b8874cf96e6afd1460b08a1e23852820b9154316c7c06e2b7ba051"><div class="ttname"><a href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1e23852820b9154316c7c06e2b7ba051">Beatmup::ThreadPool::TaskExecutionMode::NORMAL</a></div><div class="ttdeci">@ NORMAL</div><div class="ttdoc">normal task, should be run it once</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a5f536aa519d7820c7b20abc2269404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a5f536aa519d7820c7b20abc2269404">&#9670;&nbsp;</a></span>waitForJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::waitForJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Blocks until a given job finishes if not yet. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00614">614</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                    {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="preprocessor">#ifdef BEATMUP_DEBUG</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a4cf7b241b45430d8c848b75ac48ae126">id</a> != <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a56b4234125e2ed0fc6508f83274b75d6">mode</a> == <a class="code" href="classBeatmup_1_1ThreadPool.html#a1d44394b531b8874cf96e6afd1460b08a1c437477ca08e5e7ece3934c90543971">TaskExecutionMode::PERSISTENT</a> &amp;&amp; !<a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a>) {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            <span class="keyword">class </span>BlockingOnPersistentJob : <span class="keyword">public</span> Exception {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keyword">public</span>:</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                BlockingOnPersistentJob(): Exception(<span class="stringliteral">&quot;Waiting for a persistent job to finish: potential deadlock&quot;</span>) {}</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;            };</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">throw</span> BlockingOnPersistentJob();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            <span class="comment">// check if the job is in the queue</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;            <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> JobContext&amp; _ : <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                <span class="keywordflow">if</span> (_.id == <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>) {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="comment">// if not, done</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">if</span> (!found)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="comment">// otherwise wait a round and check again</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.wait(lock);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        }</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a59853d25b143fc2558cf52ac4a8fc0e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59853d25b143fc2558cf52ac4a8fc0e9">&#9670;&nbsp;</a></span>abortJob()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::abortJob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a>&#160;</td>
          <td class="paramname"><em>job</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Aborts a given submitted job. </p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if the job was interrupted while running. </dd></dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00648">648</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                           {</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment">// check if the rask is running now, abort if it is</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a4cf7b241b45430d8c848b75ac48ae126">id</a> == <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>) {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ab7fdd097345cf7a9cdd7672f77846768">abortExternally</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;            <span class="keywordflow">while</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty() &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a2893d1d8afc360c48c43cf955534ef5a">task</a> &amp;&amp; <a class="code" href="classBeatmup_1_1ThreadPool.html#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">currentJob</a>.<a class="code" href="structBeatmup_1_1ThreadPool_1_1JobContext.html#a4cf7b241b45430d8c848b75ac48ae126">id</a> == <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>)</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.wait(lock);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;        }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.begin(); it != <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.end(); it++)</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            <span class="keywordflow">if</span> (it-&gt;id == <a class="code" href="wrapper__core_8cpp.html#aa6ba1d5227cb02120a2776fb5b76ca81">job</a>) {</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.erase(it);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            }</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="aff627ac693a457fe1bd7bced0d982667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff627ac693a457fe1bd7bced0d982667">&#9670;&nbsp;</a></span>wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::ThreadPool::wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Blocks until all the submitted jobs are executed. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00672">672</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                {</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        std::unique_lock&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        <span class="keywordflow">while</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty())</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <a class="code" href="classBeatmup_1_1ThreadPool.html#ac8de215d7e846856fdf8b36212bfb7fd">jobsCvar</a>.wait(lock);</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a759a572eb4b80972efcbdac1b0f87d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a759a572eb4b80972efcbdac1b0f87d7b">&#9670;&nbsp;</a></span>busy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::busy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks whether the pool has jobs. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00682">682</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                       {</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        std::lock_guard&lt;std::mutex&gt; lock(<a class="code" href="classBeatmup_1_1ThreadPool.html#a0e5b023082843f9d8a80b83dbedadf21">jobsAccess</a>);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <span class="keywordflow">return</span> !<a class="code" href="classBeatmup_1_1ThreadPool.html#a3a241f2cc2b9b49ca83e890d1aa82560">jobs</a>.empty();</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c87059e515ca3740fbe4bcbcdeeb697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c87059e515ca3740fbe4bcbcdeeb697">&#9670;&nbsp;</a></span>hardwareConcurrency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> Beatmup::ThreadPool::hardwareConcurrency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns optimal number of threads depending on the hardware capabilities. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00691">691</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                                                    {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> N = std::thread::hardware_concurrency();</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <a class="code" href="classBeatmup_1_1RuntimeError.html#a6133cd45c7bc6ac8c536ec9a98c38fcb">RuntimeError::check</a>(N &gt; 0, <span class="stringliteral">&quot;Unable to determine hardware concurrency capabilities.&quot;</span>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        <span class="keywordflow">return</span> N &gt; <a class="code" href="namespaceBeatmup.html#a78602f2da13cd707962b501b501c5790">MAX_THREAD_INDEX</a> ? <a class="code" href="namespaceBeatmup.html#a78602f2da13cd707962b501b501c5790">MAX_THREAD_INDEX</a> : (<a class="code" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a>)N;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    }</div>
<div class="ttc" id="aclassBeatmup_1_1RuntimeError_html_a6133cd45c7bc6ac8c536ec9a98c38fcb"><div class="ttname"><a href="classBeatmup_1_1RuntimeError.html#a6133cd45c7bc6ac8c536ec9a98c38fcb">Beatmup::RuntimeError::check</a></div><div class="ttdeci">static void check(const bool condition, const std::string &amp;message)</div><div class="ttdef"><b>Definition:</b> <a href="exception_8h_source.html#l00064">exception.h:64</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_a78602f2da13cd707962b501b501c5790"><div class="ttname"><a href="namespaceBeatmup.html#a78602f2da13cd707962b501b501c5790">Beatmup::MAX_THREAD_INDEX</a></div><div class="ttdeci">static const ThreadIndex MAX_THREAD_INDEX</div><div class="ttdoc">maximum possible thread index value</div><div class="ttdef"><b>Definition:</b> <a href="parallelism_8h_source.html#l00071">parallelism.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad75a5d24d1ef1fee816ef5f9eeb6d2a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75a5d24d1ef1fee816ef5f9eeb6d2a2">&#9670;&nbsp;</a></span>isGpuQueried()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::isGpuQueried </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if GPU was queried. </dd></dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00701">701</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                     {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#a8c9e2680dbe2e281d5105fa6936add07">isGpuTested</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a961e79a87ec4c9bea40fde3e733d4a10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a961e79a87ec4c9bea40fde3e733d4a10">&#9670;&nbsp;</a></span>isGpuReady()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::isGpuReady </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if GPU is ready to use. </dd></dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00709">709</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                                   {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#ac77602e85653f2f4a03e8c158affb0dd">gpu</a> != <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9be275ae8cee993f727e2e1507081d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be275ae8cee993f727e2e1507081d11">&#9670;&nbsp;</a></span>isManagingThread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::isManagingThread </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd><code>true</code> if invoked from the manager thread </dd></dl>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00716">716</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                         {</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>)</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">return</span> std::this_thread::get_id() == <a class="code" href="classBeatmup_1_1ThreadPool.html#a449fbdf1d57145ca8aa9b0ed8eca820e">workers</a>[0]-&gt;<a class="code" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html#ac84c11f154397b38aedbef438ca8fbc7">internalThread</a>.get_id();</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a57f8f97f6e899afeb435853b6ef96d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f8f97f6e899afeb435853b6ef96d86">&#9670;&nbsp;</a></span>getThreadCount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> Beatmup::ThreadPool::getThreadCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00722">722</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classBeatmup_1_1ThreadPool.html#a2362e85ea03d927af76830baddfd1106">threadCount</a>; }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a449fbdf1d57145ca8aa9b0ed8eca820e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a449fbdf1d57145ca8aa9b0ed8eca820e">&#9670;&nbsp;</a></span>workers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBeatmup_1_1ThreadPool_1_1TaskThreadImpl.html">TaskThreadImpl</a>** Beatmup::ThreadPool::workers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>workers instances </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00410">410</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="ac77602e85653f2f4a03e8c158affb0dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77602e85653f2f4a03e8c158affb0dd">&#9670;&nbsp;</a></span>gpu</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a>* Beatmup::ThreadPool::gpu</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>THE graphic pipeline to run tasks on GPU. </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00412">412</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a3a241f2cc2b9b49ca83e890d1aa82560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a241f2cc2b9b49ca83e890d1aa82560">&#9670;&nbsp;</a></span>jobs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;<a class="el" href="structBeatmup_1_1ThreadPool_1_1JobContext.html">JobContext</a>&gt; Beatmup::ThreadPool::jobs</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>jobs queue </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00414">414</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="ab53c2c8bc95ae7b1b3a2af46af5541c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53c2c8bc95ae7b1b3a2af46af5541c3">&#9670;&nbsp;</a></span>exceptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::deque&lt;std::exception_ptr&gt; Beatmup::ThreadPool::exceptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>exceptions thrown in this pool </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00416">416</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a6bdf6f1fb93c7e9029da2a8dd7ac85a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdf6f1fb93c7e9029da2a8dd7ac85a8">&#9670;&nbsp;</a></span>currentJob</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structBeatmup_1_1ThreadPool_1_1JobContext.html">JobContext</a> Beatmup::ThreadPool::currentJob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>job being run at the moment </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00418">418</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a7aad86ae4c8dd2c3d48ab8eed8e30dca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aad86ae4c8dd2c3d48ab8eed8e30dca">&#9670;&nbsp;</a></span>jobCounter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a951a7768b54be9eac094e07049123290">Job</a> Beatmup::ThreadPool::jobCounter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00419">419</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a2362e85ea03d927af76830baddfd1106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2362e85ea03d927af76830baddfd1106">&#9670;&nbsp;</a></span>threadCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> Beatmup::ThreadPool::threadCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>actual number of workers </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00421">421</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a4e2aac0ec5ac393175d99cb3cd1b0b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e2aac0ec5ac393175d99cb3cd1b0b85">&#9670;&nbsp;</a></span>currentWorkerCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> Beatmup::ThreadPool::currentWorkerCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00424">424</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="ada74faf95e27ccfa7896f9383d9a7351"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada74faf95e27ccfa7896f9383d9a7351">&#9670;&nbsp;</a></span>remainingWorkers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceBeatmup.html#a6554f68f718b6c892b3cab99af6dbcdd">ThreadIndex</a> Beatmup::ThreadPool::remainingWorkers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of workers performing the current task right now </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00425">425</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a3261bdba948afffe25169dd37dee800f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3261bdba948afffe25169dd37dee800f">&#9670;&nbsp;</a></span>synchroCvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable Beatmup::ThreadPool::synchroCvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>gets notified about workers synchronization </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00428">428</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="ac8de215d7e846856fdf8b36212bfb7fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8de215d7e846856fdf8b36212bfb7fd">&#9670;&nbsp;</a></span>jobsCvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable Beatmup::ThreadPool::jobsCvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>gets notified about the jobs queue updates </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00429">429</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="adcac3fe797948e728eec13fe3a219879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcac3fe797948e728eec13fe3a219879">&#9670;&nbsp;</a></span>workersCvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::condition_variable Beatmup::ThreadPool::workersCvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>gets notified about workers lifecycle updates </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00430">430</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a813593493fc6aa8c46670323308c210b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a813593493fc6aa8c46670323308c210b">&#9670;&nbsp;</a></span>synchro</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex Beatmup::ThreadPool::synchro</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>workers synchronization control within the current task </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00433">433</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a2a9d748240b0155c0929f5dcf1636c3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a9d748240b0155c0929f5dcf1636c3e">&#9670;&nbsp;</a></span>workersAccess</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex Beatmup::ThreadPool::workersAccess</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>workers lifecycle access control </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00434">434</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a0e5b023082843f9d8a80b83dbedadf21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e5b023082843f9d8a80b83dbedadf21">&#9670;&nbsp;</a></span>jobsAccess</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex Beatmup::ThreadPool::jobsAccess</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>jobs queue access control </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00435">435</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="aa077fa97cde99f593ee903bb6d9b2eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa077fa97cde99f593ee903bb6d9b2eff">&#9670;&nbsp;</a></span>exceptionsAccess</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex Beatmup::ThreadPool::exceptionsAccess</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>exceptions queue access control </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00436">436</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a727bf09d6d72767b4c78f1a1b4e21896"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a727bf09d6d72767b4c78f1a1b4e21896">&#9670;&nbsp;</a></span>syncHitsCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Beatmup::ThreadPool::syncHitsCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>number of times synchronization is hit so far by all workers together </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00439">439</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a9578289eba8f11d2bc43285a71c87cb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9578289eba8f11d2bc43285a71c87cb4">&#9670;&nbsp;</a></span>syncHitsBound</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int Beatmup::ThreadPool::syncHitsBound</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>last sync hits count when all the workers were synchronized </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00440">440</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a8c9e2680dbe2e281d5105fa6936add07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c9e2680dbe2e281d5105fa6936add07">&#9670;&nbsp;</a></span>isGpuTested</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::isGpuTested</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if <code>true</code>, there was an attempt to warm up the GPU </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00443">443</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="ab7fdd097345cf7a9cdd7672f77846768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7fdd097345cf7a9cdd7672f77846768">&#9670;&nbsp;</a></span>abortExternally</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::abortExternally</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if <code>true</code>, the task is aborted externally </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00444">444</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a2bec3edee3e37366101165852a46ad88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bec3edee3e37366101165852a46ad88">&#9670;&nbsp;</a></span>abortInternally</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::abortInternally</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if <code>true</code>, the task aborts itself: beforeProcessing(), process() or processOnGPU() returned <code>false</code> </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00445">445</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a2f243f09bad1950b0af0829b3322efeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f243f09bad1950b0af0829b3322efeb">&#9670;&nbsp;</a></span>failFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::failFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>communicates to all the threads that the current task is to skip because of a problem </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00446">446</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a5ef9dfa6d0b2bdcdf04b6fa6e6adc317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ef9dfa6d0b2bdcdf04b6fa6e6adc317">&#9670;&nbsp;</a></span>repeatFlag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Beatmup::ThreadPool::repeatFlag</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>if <code>true</code>, the current task is asked to be repeated </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00447">447</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="aa56f1daac7e0a1e315204e0162a1aaae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa56f1daac7e0a1e315204e0162a1aaae">&#9670;&nbsp;</a></span>eventListener</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classBeatmup_1_1ThreadPool_1_1EventListener.html">EventListener</a>&amp; Beatmup::ThreadPool::eventListener</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00449">449</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<a id="a3c127388e2387e2371100a6163b189c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c127388e2387e2371100a6163b189c3">&#9670;&nbsp;</a></span>myIndex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespaceBeatmup.html#a916c7fdbab7370465d62d5cdd0ffceb2">PoolIndex</a> Beatmup::ThreadPool::myIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the index of the current pool </p>

<p class="definition">Definition at line <a class="el" href="thread__pool_8hpp_source.html#l00452">452</a> of file <a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>core/<a class="el" href="thread__pool_8hpp_source.html">thread_pool.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceBeatmup.html">Beatmup</a></li><li class="navelem"><a class="el" href="classBeatmup_1_1ThreadPool.html">ThreadPool</a></li>
    <li class="footer">Generated on Tue Nov 21 2023 13:54:27 for Beatmup by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
