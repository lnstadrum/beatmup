<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Beatmup: Beatmup::BitmapContentLock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Beatmup
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classBeatmup_1_1BitmapContentLock.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classBeatmup_1_1BitmapContentLock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Beatmup::BitmapContentLock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Makes sure the bitmap content is accessible within an image processing task.  
 <a href="classBeatmup_1_1BitmapContentLock.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="content__lock_8h_source.html">content_lock.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Beatmup::BitmapContentLock:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classBeatmup_1_1BitmapContentLock.png" usemap="#Beatmup::BitmapContentLock_map" alt=""/>
  <map id="Beatmup::BitmapContentLock_map" name="Beatmup::BitmapContentLock_map">
<area href="classBeatmup_1_1Audio_1_1SignalPlot.html" title="AbstractTask drawing amplitude graph of a given Signal in a bitmap." alt="Beatmup::Audio::SignalPlot" shape="rect" coords="248,56,486,80"/>
<area href="classBeatmup_1_1BitmapBinaryOperation.html" title="A binary pixelwise operation on images." alt="Beatmup::BitmapBinaryOperation" shape="rect" coords="248,112,486,136"/>
<area href="classBeatmup_1_1BitmapFromChunk.html" title="Loads a bitmap content from chunk." alt="Beatmup::BitmapFromChunk" shape="rect" coords="248,168,486,192"/>
<area href="classBeatmup_1_1BitmapResampler.html" title="Resamples an image to a given resolution." alt="Beatmup::BitmapResampler" shape="rect" coords="248,224,486,248"/>
<area href="classBeatmup_1_1Crop.html" title="A task to clip images on CPU." alt="Beatmup::Crop" shape="rect" coords="248,280,486,304"/>
<area href="classBeatmup_1_1Filters_1_1PixelwiseFilter.html" title="Base class for image filters processing a given bitmap in a pixelwise fashion." alt="Beatmup::Filters::PixelwiseFilter" shape="rect" coords="248,336,486,360"/>
<area href="classBeatmup_1_1FloodFill.html" title="Flood fill algorithm implementation." alt="Beatmup::FloodFill" shape="rect" coords="248,392,486,416"/>
<area href="classBeatmup_1_1FormatConverter.html" title="Converts bitmap content from one pixel format to another one." alt="Beatmup::FormatConverter" shape="rect" coords="248,448,486,472"/>
<area href="classBeatmup_1_1GLES31X2UpsamplingNetwork.html" title="x2 image upsampler using a convolutional neural network." alt="Beatmup::GLES31X2UpsamplingNetwork" shape="rect" coords="248,504,486,528"/>
<area href="classBeatmup_1_1Metric.html" title="Measures the difference between two bitmaps." alt="Beatmup::Metric" shape="rect" coords="248,560,486,584"/>
<area href="classBeatmup_1_1NNets_1_1InferenceTask.html" title="Task running inference of a Model." alt="Beatmup::NNets::InferenceTask" shape="rect" coords="248,616,486,640"/>
<area href="classBeatmup_1_1RenderingContext.html" title="Stores the rendering context: current program, current mapping in the scene space,..." alt="Beatmup::RenderingContext" shape="rect" coords="248,672,486,696"/>
<area href="classBeatmup_1_1ShaderApplicator.html" title="A task applying an image shader to a bitmap." alt="Beatmup::ShaderApplicator" shape="rect" coords="248,728,486,752"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structBeatmup_1_1BitmapContentLock_1_1LockDescriptor.html">LockDescriptor</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9ad72f3005ba0bd9063a33d1f9c5a68e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a9ad72f3005ba0bd9063a33d1f9c5a68e">BitmapContentLock</a> ()</td></tr>
<tr class="separator:a9ad72f3005ba0bd9063a33d1f9c5a68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad947118cd461bf49effe5a2335fb3c13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#ad947118cd461bf49effe5a2335fb3c13">~BitmapContentLock</a> ()</td></tr>
<tr class="separator:ad947118cd461bf49effe5a2335fb3c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b67f6ca66ed07b992672e514a8f21b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">readLock</a> (<a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *gpu, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *<a class="el" href="wrapper__nnets_8cpp.html#ae03fa36c4b55c9eaedbbaa69945ef122">bitmap</a>, <a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a> target)</td></tr>
<tr class="memdesc:a6b67f6ca66ed07b992672e514a8f21b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks content of a bitmap for reading using a specific processing target device.  <a href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">More...</a><br /></td></tr>
<tr class="separator:a6b67f6ca66ed07b992672e514a8f21b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af78deebb2ec4a8ba38fb20e95fe0ceea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">writeLock</a> (<a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *gpu, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *<a class="el" href="wrapper__nnets_8cpp.html#ae03fa36c4b55c9eaedbbaa69945ef122">bitmap</a>, <a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a> target)</td></tr>
<tr class="memdesc:af78deebb2ec4a8ba38fb20e95fe0ceea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks content of a bitmap for writing using a specific processing target device.  <a href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">More...</a><br /></td></tr>
<tr class="separator:af78deebb2ec4a8ba38fb20e95fe0ceea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a073b286c9f2eb1f2cb323c61ddefd842"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a073b286c9f2eb1f2cb323c61ddefd842">unlock</a> (<a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *<a class="el" href="wrapper__nnets_8cpp.html#ae03fa36c4b55c9eaedbbaa69945ef122">bitmap</a>)</td></tr>
<tr class="memdesc:a073b286c9f2eb1f2cb323c61ddefd842"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drops a lock to the bitmap.  <a href="classBeatmup_1_1BitmapContentLock.html#a073b286c9f2eb1f2cb323c61ddefd842">More...</a><br /></td></tr>
<tr class="separator:a073b286c9f2eb1f2cb323c61ddefd842"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac96138dd03505249a9be24a1f64cb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#afac96138dd03505249a9be24a1f64cb1">unlockAll</a> ()</td></tr>
<tr class="memdesc:afac96138dd03505249a9be24a1f64cb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks all the locked bitmaps unconditionally.  <a href="classBeatmup_1_1BitmapContentLock.html#afac96138dd03505249a9be24a1f64cb1">More...</a><br /></td></tr>
<tr class="separator:afac96138dd03505249a9be24a1f64cb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aeebe451a099f3231aa001263f1a6d0"><td class="memTemplParams" colspan="2">template&lt;const ProcessingTarget target&gt; </td></tr>
<tr class="memitem:a2aeebe451a099f3231aa001263f1a6d0"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a> (<a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *gpu, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *input, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *output)</td></tr>
<tr class="separator:a2aeebe451a099f3231aa001263f1a6d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64867378220aace3118f7a746ea0959"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#ab64867378220aace3118f7a746ea0959">lock</a> (<a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *gpu, <a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a> target, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *input, <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *output)</td></tr>
<tr class="separator:ab64867378220aace3118f7a746ea0959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc76943fff19798c0bb0e1b4778d0397"><td class="memTemplParams" colspan="2">template&lt;const ProcessingTarget target&gt; </td></tr>
<tr class="memitem:abc76943fff19798c0bb0e1b4778d0397"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#abc76943fff19798c0bb0e1b4778d0397">lock</a> (<a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *gpu, std::initializer_list&lt; <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> * &gt; read, std::initializer_list&lt; <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> * &gt; write)</td></tr>
<tr class="separator:abc76943fff19798c0bb0e1b4778d0397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7833cf11638fff8896432f444dc47600"><td class="memTemplParams" colspan="2">template&lt;typename ... Args&gt; </td></tr>
<tr class="memitem:a7833cf11638fff8896432f444dc47600"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a7833cf11638fff8896432f444dc47600">unlock</a> (<a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *first, Args ... others)</td></tr>
<tr class="separator:a7833cf11638fff8896432f444dc47600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a49ad395a5bd24de1d7e6e611b113cbcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a49ad395a5bd24de1d7e6e611b113cbcf">BitmapContentLock</a> (const <a class="el" href="classBeatmup_1_1BitmapContentLock.html">BitmapContentLock</a> &amp;)=delete</td></tr>
<tr class="separator:a49ad395a5bd24de1d7e6e611b113cbcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a5f7446d122b5dae02cfd6551ef9e4323"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *, <a class="el" href="structBeatmup_1_1BitmapContentLock_1_1LockDescriptor.html">LockDescriptor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a></td></tr>
<tr class="separator:a5f7446d122b5dae02cfd6551ef9e4323"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Makes sure the bitmap content is accessible within an image processing task. </p>
<p>To enable direct access to pixels, a specific operation of locking the bitmap content is typically required. When done, the bitmap content needs to be unlocked. Depending on the access type (reading/writing) an the processing target (CPU or GPU), a memory allocation and/or data transfer may be required. <a class="el" href="classBeatmup_1_1BitmapContentLock.html" title="Makes sure the bitmap content is accessible within an image processing task.">BitmapContentLock</a> performs the data transfer if necessary. It also handles multiple locking of the same bitmap by reference counting. </p>

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00034">34</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a49ad395a5bd24de1d7e6e611b113cbcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ad395a5bd24de1d7e6e611b113cbcf">&#9670;&nbsp;</a></span>BitmapContentLock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Beatmup::BitmapContentLock::BitmapContentLock </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classBeatmup_1_1BitmapContentLock.html">BitmapContentLock</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ad72f3005ba0bd9063a33d1f9c5a68e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad72f3005ba0bd9063a33d1f9c5a68e">&#9670;&nbsp;</a></span>BitmapContentLock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Beatmup::BitmapContentLock::BitmapContentLock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00048">48</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad947118cd461bf49effe5a2335fb3c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad947118cd461bf49effe5a2335fb3c13">&#9670;&nbsp;</a></span>~BitmapContentLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BitmapContentLock::~BitmapContentLock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8cpp_source.html#l00029">29</a> of file <a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                      {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#ifdef BEATMUP_DEBUG</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.empty())</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <a class="code" href="debug_8h.html#acc0d705a3052e9fda41f2d5825102e83">BEATMUP_DEBUG_E</a>(<span class="stringliteral">&quot;Destroying a content lock having %d locked bitmaps&quot;</span>, (<span class="keywordtype">int</span>)<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.size());</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="ttc" id="aclassBeatmup_1_1BitmapContentLock_html_a5f7446d122b5dae02cfd6551ef9e4323"><div class="ttname"><a href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">Beatmup::BitmapContentLock::bitmaps</a></div><div class="ttdeci">std::map&lt; AbstractBitmap *, LockDescriptor &gt; bitmaps</div><div class="ttdef"><b>Definition:</b> <a href="content__lock_8h_source.html#l00045">content_lock.h:45</a></div></div>
<div class="ttc" id="adebug_8h_html_acc0d705a3052e9fda41f2d5825102e83"><div class="ttname"><a href="debug_8h.html#acc0d705a3052e9fda41f2d5825102e83">BEATMUP_DEBUG_E</a></div><div class="ttdeci">#define BEATMUP_DEBUG_E(...)</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00034">debug.h:34</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6b67f6ca66ed07b992672e514a8f21b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b67f6ca66ed07b992672e514a8f21b8">&#9670;&nbsp;</a></span>readLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BitmapContentLock::readLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks content of a bitmap for reading using a specific processing target device. </p>
<p>If the lock is already acquired, only increases the counter. If the bitmap was previously locked for a different target device, an exception is thrown. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gpu</td><td>A graphic pipeline instance. Used to transfer the pixel data between CPU and GPU if needed. </td></tr>
    <tr><td class="paramname">bitmap</td><td>The bitmap to lock </td></tr>
    <tr><td class="paramname">target</td><td>Target processing device to make the pixel content readable for (CPU or GPU) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="content__lock_8cpp_source.html#l00037">37</a> of file <a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                                                                      {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#ifdef BEATMUP_DEBUG</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    DebugAssertion::check(!<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#a5894f321e570dbcff3e706d91c644c40">isDirty</a>(), <span class="stringliteral">&quot;Reading a dirty bitmap&quot;</span>);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordflow">if</span> (target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>)</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        DebugAssertion::check(gpu, <span class="stringliteral">&quot;Cannot lock a bitmap on GPU: no graphic pipeline instance available&quot;</span>);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">bool</span> transferToGpuNeeded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">bool</span> transferFromGpuNeeded = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.find(<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (it == <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.end()) {</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="comment">// creating a lock descriptor</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        LockDescriptor <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <span class="keyword">true</span>, <span class="keyword">false</span>,</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <span class="keyword">false</span>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            1</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        };</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="comment">// pixel transfer to GPU is needed if the bitmap is not up to date on GPU</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        transferToGpuNeeded = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu &amp;&amp; !<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#aa75c59e782c58e24b0bdf65c0829ec2d">isUpToDate</a>(<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        transferFromGpuNeeded = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu &amp;&amp; !<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#aa75c59e782c58e24b0bdf65c0829ec2d">isUpToDate</a>(<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="comment">// locking pixel data in RAM</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu || transferToGpuNeeded || transferFromGpuNeeded) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1InternalBitmap.html#ae424bbe386d70fbdd73b2a6b92289922">lockPixelData</a>();</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        }</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.emplace(<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>, <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">// already locked, just increase reference counter</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keyword">auto</span>&amp; <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a> = it-&gt;second;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <a class="code" href="classBeatmup_1_1RuntimeError.html#a6133cd45c7bc6ac8c536ec9a98c38fcb">RuntimeError::check</a>(((target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>) == <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu) &amp;&amp; ((target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>) == <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu),</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <span class="stringliteral">&quot;Lock target mismatch: a bitmap was previously locked for a different target&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="comment">// It is allowed to lock a bitmap for writing first and for reading later.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.read) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            transferToGpuNeeded = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu &amp;&amp; !<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#aa75c59e782c58e24b0bdf65c0829ec2d">isUpToDate</a>(<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            transferFromGpuNeeded = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu &amp;&amp; !<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#aa75c59e782c58e24b0bdf65c0829ec2d">isUpToDate</a>(<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>);</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked &amp;&amp; (transferToGpuNeeded || transferFromGpuNeeded)) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1InternalBitmap.html#ae424bbe386d70fbdd73b2a6b92289922">lockPixelData</a>();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.read = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.refs++;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// do pixel transfer if required</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">if</span> (transferToGpuNeeded)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        gpu-&gt;<a class="code" href="classBeatmup_1_1GraphicPipeline.html#a70148b99f9d73ce6f673ce82eb288ead">pushPixels</a>(*<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transferFromGpuNeeded)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        gpu-&gt;<a class="code" href="classBeatmup_1_1GraphicPipeline.html#a3bae00bb4c894606f3c175566701dcaf">pullPixels</a>(*<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="ttc" id="aclassBeatmup_1_1AbstractBitmap_html_a5894f321e570dbcff3e706d91c644c40"><div class="ttname"><a href="classBeatmup_1_1AbstractBitmap.html#a5894f321e570dbcff3e706d91c644c40">Beatmup::AbstractBitmap::isDirty</a></div><div class="ttdeci">bool isDirty() const</div><div class="ttdoc">Returns true if the bitmap does not contain any valid content.</div><div class="ttdef"><b>Definition:</b> <a href="abstract__bitmap_8cpp_source.html#l00111">abstract_bitmap.cpp:111</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1AbstractBitmap_html_aa75c59e782c58e24b0bdf65c0829ec2d"><div class="ttname"><a href="classBeatmup_1_1AbstractBitmap.html#aa75c59e782c58e24b0bdf65c0829ec2d">Beatmup::AbstractBitmap::isUpToDate</a></div><div class="ttdeci">bool isUpToDate(ProcessingTarget) const</div><div class="ttdef"><b>Definition:</b> <a href="abstract__bitmap_8cpp_source.html#l00106">abstract_bitmap.cpp:106</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1BitmapContentLock_html_a2aeebe451a099f3231aa001263f1a6d0"><div class="ttname"><a href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">Beatmup::BitmapContentLock::lock</a></div><div class="ttdeci">void lock(GraphicPipeline *gpu, AbstractBitmap *input, AbstractBitmap *output)</div><div class="ttdef"><b>Definition:</b> <a href="content__lock_8h_source.html#l00084">content_lock.h:84</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1GraphicPipeline_html_a3bae00bb4c894606f3c175566701dcaf"><div class="ttname"><a href="classBeatmup_1_1GraphicPipeline.html#a3bae00bb4c894606f3c175566701dcaf">Beatmup::GraphicPipeline::pullPixels</a></div><div class="ttdeci">void pullPixels(AbstractBitmap &amp;bitmap)</div><div class="ttdoc">Transfers bitmap pixels from GPU to CPU.</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8cpp_source.html#l00921">pipeline.cpp:921</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1GraphicPipeline_html_a70148b99f9d73ce6f673ce82eb288ead"><div class="ttname"><a href="classBeatmup_1_1GraphicPipeline.html#a70148b99f9d73ce6f673ce82eb288ead">Beatmup::GraphicPipeline::pushPixels</a></div><div class="ttdeci">void pushPixels(AbstractBitmap &amp;bitmap)</div><div class="ttdoc">Transfers bitmap pixels from CPU to GPU.</div><div class="ttdef"><b>Definition:</b> <a href="pipeline_8cpp_source.html#l00926">pipeline.cpp:926</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1InternalBitmap_html_ae424bbe386d70fbdd73b2a6b92289922"><div class="ttname"><a href="classBeatmup_1_1InternalBitmap.html#ae424bbe386d70fbdd73b2a6b92289922">Beatmup::InternalBitmap::lockPixelData</a></div><div class="ttdeci">void lockPixelData()</div><div class="ttdoc">Locks access to the CPU memory buffer containing pixel data.</div><div class="ttdef"><b>Definition:</b> <a href="internal__bitmap_8cpp_source.html#l00123">internal_bitmap.cpp:123</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1RuntimeError_html_a6133cd45c7bc6ac8c536ec9a98c38fcb"><div class="ttname"><a href="classBeatmup_1_1RuntimeError.html#a6133cd45c7bc6ac8c536ec9a98c38fcb">Beatmup::RuntimeError::check</a></div><div class="ttdeci">static void check(const bool condition, const std::string &amp;message)</div><div class="ttdef"><b>Definition:</b> <a href="exception_8h_source.html#l00064">exception.h:64</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f"><div class="ttname"><a href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">Beatmup::CPU</a></div><div class="ttdeci">@ CPU</div><div class="ttdef"><b>Definition:</b> <a href="basic__types_8h_source.html#l00055">basic_types.h:55</a></div></div>
<div class="ttc" id="anamespaceBeatmup_html_adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e"><div class="ttname"><a href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">Beatmup::GPU</a></div><div class="ttdeci">@ GPU</div><div class="ttdef"><b>Definition:</b> <a href="basic__types_8h_source.html#l00055">basic_types.h:55</a></div></div>
<div class="ttc" id="awrapper__imag_8cpp_html_a09c1a2fb6d90a2b7ca3dedc65b402be2"><div class="ttname"><a href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a></div><div class="ttdeci">Beatmup::InternalBitmap * bitmap</div><div class="ttdef"><b>Definition:</b> <a href="wrapper__imag_8cpp_source.html#l00602">wrapper_imag.cpp:602</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af78deebb2ec4a8ba38fb20e95fe0ceea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af78deebb2ec4a8ba38fb20e95fe0ceea">&#9670;&nbsp;</a></span>writeLock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BitmapContentLock::writeLock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>bitmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locks content of a bitmap for writing using a specific processing target device. </p>
<p>If the lock is already acquired, only increases the counter. If the bitmap was previously locked for reading, an exception is thrown. However, it is allowed to lock for different devices, or to lock for writing first and reading later. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gpu</td><td>A graphic pipeline instance </td></tr>
    <tr><td class="paramname">bitmap</td><td>The bitmap to lock </td></tr>
    <tr><td class="paramname">target</td><td>Target processing device to make the pixel content readable for (CPU or GPU) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="content__lock_8cpp_source.html#l00101">101</a> of file <a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                                                                                       {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="preprocessor">#ifdef BEATMUP_DEBUG</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        DebugAssertion::check(gpu, <span class="stringliteral">&quot;Cannot lock a bitmap on GPU: no graphic pipeline instance available&quot;</span>);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.find(<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (it == <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.end()) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="comment">// creating a lock descriptor</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        LockDescriptor <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>{</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keyword">false</span>, <span class="keyword">true</span>,</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>,</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>,</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>,    <span class="comment">// data is locked if writing on CPU</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            1</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        };</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.emplace(<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>, <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <span class="comment">// locking pixel data in RAM</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1InternalBitmap.html#ae424bbe386d70fbdd73b2a6b92289922">lockPixelData</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="comment">// already locked, just increase reference counter</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">auto</span>&amp; <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a> = it-&gt;second;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.read &amp;&amp; !<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.write)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classBeatmup_1_1RuntimeError.html">RuntimeError</a>(<span class="stringliteral">&quot;Cannot a bitmap for writing: it was locked for reading before. Lock it for writing first.&quot;</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">// lock data if needed and not yet</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked &amp;&amp; target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1InternalBitmap.html#ae424bbe386d70fbdd73b2a6b92289922">lockPixelData</a>();</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu |= (target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu |= (target == <a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.refs++;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="ttc" id="aclassBeatmup_1_1RuntimeError_html"><div class="ttname"><a href="classBeatmup_1_1RuntimeError.html">Beatmup::RuntimeError</a></div><div class="ttdef"><b>Definition:</b> <a href="exception_8h_source.html#l00061">exception.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a073b286c9f2eb1f2cb323c61ddefd842"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a073b286c9f2eb1f2cb323c61ddefd842">&#9670;&nbsp;</a></span>unlock() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BitmapContentLock::unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>bitmap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Drops a lock to the bitmap. </p>
<p>If no other locks own the content, the bitmap is unlocked. </p>

<p class="definition">Definition at line <a class="el" href="content__lock_8cpp_source.html#l00145">145</a> of file <a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                     {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">auto</span> it = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.find(<a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#ifdef BEATMUP_DEBUG</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    DebugAssertion::check(it != <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.end(), <span class="stringliteral">&quot;Trying to unlock a bitmap that is not locked.&quot;</span>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">auto</span>&amp; <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a> = it-&gt;second;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.refs--;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.refs == 0) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1InternalBitmap.html#a047b9f1db19449f8708b7afa2e4c6e09">unlockPixelData</a>();</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.write) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#af92de5a97aecdb2b9afa8dd83b49dc7d">upToDate</a>[<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>] = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="wrapper__imag_8cpp.html#a09c1a2fb6d90a2b7ca3dedc65b402be2">bitmap</a>-&gt;<a class="code" href="classBeatmup_1_1AbstractBitmap.html#af92de5a97aecdb2b9afa8dd83b49dc7d">upToDate</a>[<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>] = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.erase(it);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="ttc" id="aclassBeatmup_1_1AbstractBitmap_html_af92de5a97aecdb2b9afa8dd83b49dc7d"><div class="ttname"><a href="classBeatmup_1_1AbstractBitmap.html#af92de5a97aecdb2b9afa8dd83b49dc7d">Beatmup::AbstractBitmap::upToDate</a></div><div class="ttdeci">bool upToDate[2]</div><div class="ttdoc">bitmap up-to-date state on CPU and GPU</div><div class="ttdef"><b>Definition:</b> <a href="abstract__bitmap_8h_source.html#l00103">abstract_bitmap.h:103</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1InternalBitmap_html_a047b9f1db19449f8708b7afa2e4c6e09"><div class="ttname"><a href="classBeatmup_1_1InternalBitmap.html#a047b9f1db19449f8708b7afa2e4c6e09">Beatmup::InternalBitmap::unlockPixelData</a></div><div class="ttdeci">void unlockPixelData()</div><div class="ttdoc">Unlocks access to the CPU memory buffer containing pixel data.</div><div class="ttdef"><b>Definition:</b> <a href="internal__bitmap_8h_source.html#l00042">internal_bitmap.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afac96138dd03505249a9be24a1f64cb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afac96138dd03505249a9be24a1f64cb1">&#9670;&nbsp;</a></span>unlockAll()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BitmapContentLock::unlockAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlocks all the locked bitmaps unconditionally. </p>

<p class="definition">Definition at line <a class="el" href="content__lock_8cpp_source.html#l00167">167</a> of file <a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                                  {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it : <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>) {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">auto</span>&amp; <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a> = it.second;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.isDataLocked)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            it.first-&gt;unlockPixelData();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.write) {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            it.first-&gt;upToDate[<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a3ff6e0d2740727bf06e8a8d75da4f77f">ProcessingTarget::CPU</a>] = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.cpu;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            it.first-&gt;upToDate[<a class="code" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6a80048ce24fb1ee69256f884054fea40e">ProcessingTarget::GPU</a>] = <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a2aeebe451a099f3231aa001263f1a6d0">lock</a>.gpu;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a5f7446d122b5dae02cfd6551ef9e4323">bitmaps</a>.clear();</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a2aeebe451a099f3231aa001263f1a6d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aeebe451a099f3231aa001263f1a6d0">&#9670;&nbsp;</a></span>lock() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;const ProcessingTarget target&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::BitmapContentLock::lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00084">84</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">writeLock</a>(gpu, output, target);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">readLock</a>(gpu, input, target);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div>
<div class="ttc" id="aclassBeatmup_1_1BitmapContentLock_html_a6b67f6ca66ed07b992672e514a8f21b8"><div class="ttname"><a href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">Beatmup::BitmapContentLock::readLock</a></div><div class="ttdeci">void readLock(GraphicPipeline *gpu, AbstractBitmap *bitmap, ProcessingTarget target)</div><div class="ttdoc">Locks content of a bitmap for reading using a specific processing target device.</div><div class="ttdef"><b>Definition:</b> <a href="content__lock_8cpp_source.html#l00037">content_lock.cpp:37</a></div></div>
<div class="ttc" id="aclassBeatmup_1_1BitmapContentLock_html_af78deebb2ec4a8ba38fb20e95fe0ceea"><div class="ttname"><a href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">Beatmup::BitmapContentLock::writeLock</a></div><div class="ttdeci">void writeLock(GraphicPipeline *gpu, AbstractBitmap *bitmap, ProcessingTarget target)</div><div class="ttdoc">Locks content of a bitmap for writing using a specific processing target device.</div><div class="ttdef"><b>Definition:</b> <a href="content__lock_8cpp_source.html#l00101">content_lock.cpp:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab64867378220aace3118f7a746ea0959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab64867378220aace3118f7a746ea0959">&#9670;&nbsp;</a></span>lock() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::BitmapContentLock::lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceBeatmup.html#adf79396e68ef8630990052dd04d562c6">ProcessingTarget</a>&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00089">89</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                                                                                                                       {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">writeLock</a>(gpu, output, target);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">readLock</a>(gpu, input, target);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="abc76943fff19798c0bb0e1b4778d0397"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc76943fff19798c0bb0e1b4778d0397">&#9670;&nbsp;</a></span>lock() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;const ProcessingTarget target&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::BitmapContentLock::lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1GraphicPipeline.html">GraphicPipeline</a> *&#160;</td>
          <td class="paramname"><em>gpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::initializer_list&lt; <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> * &gt;&#160;</td>
          <td class="paramname"><em>read</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::initializer_list&lt; <a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> * &gt;&#160;</td>
          <td class="paramname"><em>write</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00095">95</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                                                                                                                                      {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> bmp : <a class="code" href="namespaceBeatmup_1_1BitmapProcessing.html#ace1246f8885503333d221fb8773e471b">write</a>)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <a class="code" href="classBeatmup_1_1BitmapContentLock.html#af78deebb2ec4a8ba38fb20e95fe0ceea">writeLock</a>(gpu, bmp, target);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">auto</span> bmp : <a class="code" href="namespaceBeatmup_1_1BitmapProcessing.html#ae06da9446a73ff1c349e47e3cf6380f0">read</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a6b67f6ca66ed07b992672e514a8f21b8">readLock</a>(gpu, bmp, target);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div>
<div class="ttc" id="anamespaceBeatmup_1_1BitmapProcessing_html_ace1246f8885503333d221fb8773e471b"><div class="ttname"><a href="namespaceBeatmup_1_1BitmapProcessing.html#ace1246f8885503333d221fb8773e471b">Beatmup::BitmapProcessing::write</a></div><div class="ttdeci">void write(Bitmap &amp;bitmap, Args &amp;&amp;... args)</div><div class="ttdoc">Calls a Func&lt; WriterClass &gt;::process(access, params) that writes to a bitmap of any kind,...</div><div class="ttdef"><b>Definition:</b> <a href="bitmap_2processing_8h_source.html#l00090">processing.h:90</a></div></div>
<div class="ttc" id="anamespaceBeatmup_1_1BitmapProcessing_html_ae06da9446a73ff1c349e47e3cf6380f0"><div class="ttname"><a href="namespaceBeatmup_1_1BitmapProcessing.html#ae06da9446a73ff1c349e47e3cf6380f0">Beatmup::BitmapProcessing::read</a></div><div class="ttdeci">void read(Bitmap &amp;bitmap, Args &amp;&amp;... args)</div><div class="ttdoc">Calls a Func&lt; ReaderClass &gt;::process(access, params), where.</div><div class="ttdef"><b>Definition:</b> <a href="bitmap_2processing_8h_source.html#l00049">processing.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7833cf11638fff8896432f444dc47600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7833cf11638fff8896432f444dc47600">&#9670;&nbsp;</a></span>unlock() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename ... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Beatmup::BitmapContentLock::unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a> *&#160;</td>
          <td class="paramname"><em>first</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args ...&#160;</td>
          <td class="paramname"><em>others</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00103">103</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                                                                   {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a073b286c9f2eb1f2cb323c61ddefd842">unlock</a>(first);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            <a class="code" href="classBeatmup_1_1BitmapContentLock.html#a073b286c9f2eb1f2cb323c61ddefd842">unlock</a>(others...);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="ttc" id="aclassBeatmup_1_1BitmapContentLock_html_a073b286c9f2eb1f2cb323c61ddefd842"><div class="ttname"><a href="classBeatmup_1_1BitmapContentLock.html#a073b286c9f2eb1f2cb323c61ddefd842">Beatmup::BitmapContentLock::unlock</a></div><div class="ttdeci">void unlock(AbstractBitmap *bitmap)</div><div class="ttdoc">Drops a lock to the bitmap.</div><div class="ttdef"><b>Definition:</b> <a href="content__lock_8cpp_source.html#l00145">content_lock.cpp:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a5f7446d122b5dae02cfd6551ef9e4323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f7446d122b5dae02cfd6551ef9e4323">&#9670;&nbsp;</a></span>bitmaps</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classBeatmup_1_1AbstractBitmap.html">AbstractBitmap</a>*, <a class="el" href="structBeatmup_1_1BitmapContentLock_1_1LockDescriptor.html">LockDescriptor</a>&gt; Beatmup::BitmapContentLock::bitmaps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="content__lock_8h_source.html#l00045">45</a> of file <a class="el" href="content__lock_8h_source.html">content_lock.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>core/bitmap/<a class="el" href="content__lock_8h_source.html">content_lock.h</a></li>
<li>core/bitmap/<a class="el" href="content__lock_8cpp_source.html">content_lock.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceBeatmup.html">Beatmup</a></li><li class="navelem"><a class="el" href="classBeatmup_1_1BitmapContentLock.html">BitmapContentLock</a></li>
    <li class="footer">Generated on Tue Nov 21 2023 13:54:27 for Beatmup by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
